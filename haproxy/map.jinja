{% set haproxy = salt['grains.filter_by']({
    'default': {
        'package': 'haproxy',
        'config_file': '/etc/haproxy/haproxy.cfg',
        'config_file_source': 'salt://haproxy/templates/haproxy.jinja',
        'user': 'root',
        'group': 'root',
        'service': 'haproxy',
        'manage_directories': True,
    },
    'FreeBSD': {
        'config_file': '/usr/local/etc/haproxy.conf',
        'group': 'wheel',
    },
    'Suse': {
        'manage_directories': False,
    },
}, merge=salt['pillar.get']('haproxy:lookup'), base='default') %}

